<!DOCTYPE html>
<html lang="es-VE">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>JR | Piedra Papel o Tijeras</title>

    <link rel="icon" href="https://icones.pro/wp-content/uploads/2021/04/icone-de-la-main-orange.png" type="image/png" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <!-- Styles -->
    
    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        } 

        /* Establece un tamaño de fuente para pantallas muy pequeñas */
        html {
            font-size: 12px;
        }

        /* Ajusta el tamaño de la fuente para pantallas de tamaño medio (mayores o iguales a 320px) */
        @media (min-width: 320px) {
            html {
                font-size: 13px;
            }
        }

        /* Ajusta el tamaño de la fuente para pantallas más grandes (mayores o iguales a 720px) */
        @media (min-width: 720px) {
            html {
                font-size: 14px;
            }
        }

        /* Establece un tamaño de fuente máximo para pantallas muy grandes (mayores o iguales a 1200px) */
        @media (min-width: 1200px) {
            html {
                font-size: 16px;
            }
        }


        header {
            background-color: grey;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: sticky;
            display: flex;
            justify-content: space-between;
            top: 0;
            width: 100%;
        }

            .logo {
                display: inline-block;
                color: #fff;
                font-size: 4rem;
                margin-left: 10px;
            }

            .title {
                display: inline-block;
                text-align: center;
                color: #fff;
                font-size: 2.5rem;
                margin-left: 10px;
            }

            .menu {
                display: inline-block;
                margin-right: 10px;
                font-size: 4rem;
                color: #fff;
            }

                .menu button {
                    background-color: transparent;           
                    border: none;
                    color: #fff;
                    font-size: 4rem;
                    cursor: pointer;
                    
                }

                .menu-items {
                    display: none;
                    position: fixed;
                    background-color: #333;
                    width: 30%;
                    min-width: 180px;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    z-index: 1;
                }

                    .menu-items.active {
                        display: block;
                    }

                    .menu-list {
                        list-style: none;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        padding: 10px;
                    }

                        .menu-list li {
                            margin: 0 10px;
                        }

                            .menu-list li a {
                                color: #fff;
                                text-decoration: none;
                                font-size: 1.5rem;
                            }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
        }

        img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }

            .hero {
                background-color: #f0f0f0;
                display: flex;
                justify-content: center;
                align-items: center;
                width: 100%;
                padding: 10px;
            }

                .hero-content {
                    text-align: center;
                    max-width: 800px;
                }

                    .hero-content h2 {
                        font-size: 2.5rem;
                        color: #333;
                        margin-bottom: 10px;
                    }

                    .hero-content p {
                        font-size: 1.5rem;
                        color: #333;
                    }

                    .start-button {
                        background-color: #333;
                        color: #fff;
                        font-size: 1.5rem;
                        padding: 10px 20px;
                        border: none;
                        border-radius: 5px;
                        margin-top: 10px;
                        cursor: pointer;
                    }

            .instructions {
            color: #333;
            text-align: center;
            padding: 10px;
            margin-top: 10px;
            }

                .instructions h2 {
                    font-size: 2.5rem;
                    margin-bottom: 10px;
                }

                .instructions ol {
                    list-style: none;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                }

                    .instructions ol li {
                        font-size: 1.5rem;
                        margin: 10px 0;
                    }
        
            .name-avatar {
                display: flexbox;
                background-color: #f0f0f0;
                text-align: center;
                width: 100%;
                padding: 10px;
                margin-top: 10px;
            }

                .name-avatar form {
                    display: inline;
                }



                .name-avatar .avatar {
                    display: inline-block;
                    margin: 10px 0;
                }

                    .avatar img {
                        border-radius: 50%;
                    }

                    .avatar button {
                        background-color: #333;
                        color: #fff;
                        font-size: 1rem;
                        padding: 5px 10px;
                        top: 50%;   
                        border: none;
                        border-radius: 5px;
                        margin: 0 10px;
                        cursor: pointer;
                    }
                    
                    .modal {
                        display: none; /* Oculto por defecto */
                        position: fixed; /* Flotante */
                        z-index: 1000; /* Sobre otros elementos */
                        left: 0;
                        top: 0;
                        width: 100%; /* Ancho completo */
                        height: 100%; /* Alto completo */
                        overflow: auto; /* Habilita scroll si es necesario */
                        background-color: rgba(0,0,0,0.4); /* Fondo negro semi-transparente */
                    }

                    .slider {
                        display: flex;
                        overflow-x: auto;
                        scroll-snap-type: x mandatory;
                        margin: 10% auto; /* 10% desde la parte superior y centrado horizontalmente */
                        padding: 20px;
                        width: 80%; /* Ancho del deslizador */
                        background: white; /* Fondo blanco para el deslizador */
                    }

                    .avatar input {
                            padding: 10px;
                            font-size: 1.5rem;
                            border: 1px solid #333;
                            border-radius: 5px;
                            margin-right: 10px;
                        }
                    

        .Game-list {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 10px;

        }

            #gamesContainer {
            max-height: 500px; /* Altura máxima del contenedor */
            overflow-y: auto; /* Habilita el desplazamiento vertical si el contenido excede la altura */
            border: 1px solid #ccc; /* Opcional: añade un borde al contenedor */
            }

                table {
                    border-collapse: collapse; /* Asegura que los bordes de la tabla se colapsen en uno solo */
                    width: 100%; /* Establece el ancho de la tabla al 100% del contenedor */
                }
                th, td {
                    border: 1px solid black; /* Añade un borde sólido a las celdas de la tabla */
                    text-align: left; /* Alinea el texto a la izquierda */
                    padding: 8px; /* Añade un relleno alrededor del texto en las celdas */
                }
                th {
                    background-color: #f2f2f2; /* Establece un color de fondo para los encabezados de la tabla */
                }
                tr:nth-child(even) {
                    background-color: #f9f9f9; /* Establece un color de fondo para las filas pares */
                }
        
        .SearchGame {
                display: flexbox;
                background-color: #f0f0f0;
                text-align: center;
                width: 100%;
                padding: 10px;
                margin-top: 10px;
            }
                
                    .SearchGame form {
                        display: inline;
                    }
    
                        .SearchGame input {
                            padding: 10px;
                            font-size: 1.5rem;
                            border: 1px solid #333;
                            border-radius: 5px;
                            margin-right: 10px;
                        }
    
                        .SearchGame button {
                            background-color: #333;
                            color: #fff;
                            font-size: 1.5rem;
                            padding: 10px 20px;
                            border: none;
                            border-radius: 5px;
                            cursor: pointer;
                        }

        .game-rules{
            display: flexbox;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 10px;
            margin-top: 10px;
        }

            .game-rules h2 {
                font-size: 2.5rem;
                text-align: center;
                margin-bottom: 10px;
            }

            .game-rules ul {
                list-style: none;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

                .game-rules ul li {
                    font-size: 1.5rem;
                    margin: 10px 0;
        }

        .RockPaperScissor {
            display: flexbox;
            justify-content: center;
            margin: 15px;
            align-items: center;
            background-color: #f0f0f0;
        }

            .RockPaperScissor .encabezado {
                display: flex;
                justify-content: space-between;
                width: 100%;
                padding: 10px;
            }

                .RockPaperScissor .encabezado h2 {
                    font-size: 1.5rem;
                    text-align: center;
                    margin-bottom: 10px;
                }

                .RockPaperScissor .encabezado button {
                    background-color: #333;
                    color: #fff;
                    font-size: 0.5rem;
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                }

                    .RockPaperScissor .encabezado button:hover {
                        background-color: red;
                    }
            
            .GameId {
                width: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 10px 0px;
            }

                .GameId input {
                    padding: 10px;
                    font-size: 1rem;
                    border: 1px solid #333;
                    border-radius: 5px;
                    margin-right: 10px;
                }

                .GameId button {
                    background-color: #333;
                    color: #fff;
                    font-size: 1rem;
                    padding: 10px 20px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                }

                    .GameId button:hover {
                        background-color: #999;
                        color: #333;
                    }
            
            .Partida {
                display: flex;
                justify-content: space-around;
                width: 100%;

            }

                .jugadas{
                    display: none;
                }

                .Partida div {
                    text-align: center;
                }

        .salto {
            /* Estilos del salto */
            height: 60px;
            /* altura 100px */
            }

        footer {
        /* Estilos del footer */
        position: fixed;
        /* posicion  */
        left: 0;
        /* margen izquierdo 0 */
        bottom: 0;
        /* margen inferior 0 */
        width: 100%;
        /* ancho 100% */
        background-color: #333333;
        /* color de fondo #333333 */
        color: #ffffff;
        /* color #ffffff */
        padding: 20px;
        /* relleno 20px */
        text-align: center;
        /* alineacion de texto al centro */
        }
    </style>

</head>
<body>
    <header>
        <a href="https://github.com/Jrgil20" class="logo">JR</a>
        <h1 class="title">Piedra Papel o Tijeras</h1>
        <nav class="menu">
            <button onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
            <div class="menu-items">
                <button onclick="toggleMenu()"><i class="fas fa-arrow-left"></i></button>
                <h2 class="title">Piedra Papel o Tijeras</h2>
                <ul class="menu-list">
                    <li><a href="#">Home</a></li>
            
                </ul>
            </div>
            <script>
                function toggleMenu() {
                    document.querySelector('.menu-items').classList.toggle('active');
                }
            </script>
        </nav>
    </header>

    <main>
        
        <section class="hero">
            <div class="hero-content">
                <h2>Bienvenido a <strong>Piedra <i class="fas fa-hand-rock"></i>, Papel <i class="fas fa-hand-paper"></i> o Tijeras <i class="fas fa-hand-scissors"></i></strong></h2>
                <p>¡Demuestra tus habilidades en este clásico juego de decisiones!</p>
                <p> Elige entre piedra, papel o tijeras y desafía a tus amigos para ver quién es el mejor.</p>
                <p>¡Diviértete y que gane el mejor!</p>
                <button class="start-button" onclick="NuevoJuego()"><i class="fas fa-play"></i> Iniciar Juego</button>
            </div>
        </section>

        <section class="instructions" id="Instructions" >
            <h2>Instrucciones</h2>
            <ol>
                <li>Elige tu avatar</li>
                <li>Ingresa tu nombre</li>
                <li>Comparte el ID de juego</li>
                <li>Espera a que tu oponente se una al juego</li>
                <li>¡Comienza a jugar y diviértete!</li>
            </ol>
        </section>
        
        <section class="name-avatar">

            <h2>Nombre y Avatar</h2>
            
            <div id="avatarModal" class="modal">
                <!-- Deslizador de Imágenes -->
                <div id="avatarSlider" class="slider"></div>
            </div>
            
            <script>
                function getAvatars() {
                    fetch('https://parcial-202425-production.up.railway.app/games/avatars', {
                        method: 'GET', // Método HTTP
                        headers: {
                            'Accept': 'application/json', // Indica el tipo de contenido que se espera recibir
                        }
                    })
                    .then(response => response.text()) // Obtiene la respuesta como texto
                    .then(data => {
                        // Convierte la cadena a un array de JavaScript
                        const avatars = JSON.parse(data);
                        const avatarList = document.getElementById('lista-avatares');
                        // Itera sobre el array
                        avatars.forEach(avatar => {
                            const img = document.createElement('img');
                            img.src = avatar; // Establece el src de la imagen al valor del avatar
                            img.width = 100; // Establece el ancho de la imagen a 100 píxeles
                            img.height = 100; // Establece el alto de la imagen a 100 píxeles
                            img.classList.add('slide'); // Añade una clase para estilizar cada imagen si es necesario
                            
                            // Extrae el nombre del avatar de la URL
                            const avatarName = avatar.split('=').pop();
                            img.setAttribute('name', avatarName); // Añade un atributo name a la imagen con el nombre extraído
                            
                            // Establece el primer avatar de la lista como valor por defecto
                            document.getElementById('avatarSelect').src = avatars[0];
                            localStorage.setItem('avatar', avatars[0]);
                            document.getElementById('name').value = avatars[0].split('=').pop();
                            localStorage.setItem('name', avatars[0].split('=').pop());

                            img.addEventListener('click', () => {
                                // Establece el valor del campo de entrada de nombre al nombre del avatar
                                document.getElementById('name').value = avatarName;
                                localStorage.setItem('name', avatarName);
                                document.getElementById('avatarSelect').src = avatar; // Establece la imagen seleccionada como avatar
                                localStorage.setItem('avatar', avatar);
                                hideModal(); // Oculta el modal
                            });
    
                            // Añade el elemento de imagen al contenedor del deslizador
                            document.getElementById('avatarSlider').appendChild(img);
                        });
                    })
                    .catch(error => console.error('Error al cargar los avatares:', error));
                }
    
                document.addEventListener('DOMContentLoaded', getAvatars);
    
                function showModal() {
                    document.getElementById('avatarModal').style.display = 'block';
                }
    
                function hideModal() {
                        document.getElementById('avatarModal').style.display = 'none';
                }
            </script>

            <form >
                <div class="avatar" role="button" id="avatar-boton"  onclick="showModal()" >
                    <button type="button"><i class="fas fa-chevron-left"></i></button>
                    <img alt="Avatar image" id="avatarSelect">
                    <button type="button"><i class="fas fa-chevron-right"></i></button>
                </div>

                <div class="name">
                    <input type="text" id="name"  name="name"  required>
                </div>

                <button type="submit">Guardar</button>
            </form>
            <script> 
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.name-avatar form');
                    form.addEventListener('submit', function(event) {
                        event.preventDefault();
                        const name = document.getElementById('name').value;
                        const avatar = document.getElementById('avatarSelect').src;
                        localStorage.setItem('name', name);
                        localStorage.setItem('avatar', avatar);
                    });
                });
            </script>

        </section>

        <section class="Game-list">
            <div id="gamesContainer">
                <div id="games">
                    <!-- La tabla se insertará aquí -->
                    <script>
                        document.addEventListener('DOMContentLoaded', function() {
                            fetch('https://parcial-202425-production.up.railway.app/games', {
                                method: 'GET',
                                headers: {
                                    'Accept': 'application/json',
                                }
                            })
                            .then(response => response.text())
                            .then(text => JSON.parse(text))
                            .then(data => {
                                console.log('Success:', data);
                                
                                const gamesContainer = document.getElementById('games');
                                gamesContainer.innerHTML = ''; // Limpia el contenedor
                                
                                // Crea la tabla y sus encabezados
                                const table = document.createElement('table');
                                const thead = document.createElement('thead');
                                const tbody = document.createElement('tbody');
                                table.appendChild(thead);
                                table.appendChild(tbody);
                
                                // Define los encabezados de la tabla
                                const headers = ['Game ID', 'Player1', 'Player2'];
                                const trHead = document.createElement('tr');
                                headers.forEach(headerText => {
                                    const th = document.createElement('th');
                                    th.textContent = headerText;
                                    trHead.appendChild(th);
                                });
                                thead.appendChild(trHead);
                
                                // Llena la tabla solo con los datos de Game ID
                                data.forEach(game => {
                                    // Crea una fila nueva
                                    const tr = document.createElement('tr');
                                    
                                    // Celda para el ID del juego
                                    const gameIdCell = document.createElement('td');
                                    gameIdCell.textContent = game.id;
                                    tr.appendChild(gameIdCell);
                                    
                                    // Celda para Player1
                                    const player1Cell = document.createElement('td');
                                    if (game.info.players.length > 0) {
                                        const player1Name = document.createTextNode(game.info.players[0].name);
                                        const player1Avatar = document.createElement('img');
                                        // Verifica si avatar es una cadena y comienza con 'https'
                                        if (typeof game.info.players[0].avatar === 'string' && game.info.players[0].avatar.startsWith('https')) {
                                            player1Avatar.src = game.info.players[0].avatar;
                                        } else {
                                            player1Avatar.src = 'https://api.dicebear.com/9.x/bottts-neutral/svg?seed=' + game.info.players[0].avatar; // URL de imagen por defecto
                                        }
                                        player1Avatar.alt = "Player 1 Avatar";
                                        player1Avatar.style.borderRadius = '50%'; // Hace la imagen circular
                                        player1Avatar.style.width = '25px'; // Ajusta el tamaño según necesites
                                        player1Cell.appendChild(player1Avatar);
                                        player1Cell.appendChild(player1Name);  
                                    } else {
                                        player1Cell.textContent = 'N/A';
                                    }
                                    tr.appendChild(player1Cell);
                                    
                                    // Celda para Player2
                                    const player2Cell = document.createElement('td');
                                    if (game.info.players.length > 1) {
                                        const player2Name = document.createTextNode(game.info.players[1].name);
                                        const player2Avatar = document.createElement('img');
                                        if (game.info.players[1].avatar.startsWith('https') ) {
                                            player2Avatar.src = game.info.players[1].avatar;
                                        } else {
                                            player2Avatar.src = 'https://api.dicebear.com/9.x/bottts-neutral/svg?seed=' + game.info.players[1].avatar; // URL de imagen por defecto
                                        }
                                        player2Avatar.alt = "Player 2 Avatar";
                                        player2Avatar.style.width = '25px'; // Ajusta el tamaño según necesites
                                        player2Avatar.style.borderRadius = '50%'; // Hace la imagen circular
                                        player2Cell.appendChild(player2Avatar);
                                        player2Cell.appendChild(player2Name);
                                    } else {
                                        player2Cell.textContent = 'N/A';
                                    }
                                    tr.appendChild(player2Cell);
                
                    
                
                                    tbody.appendChild(tr);
                                });
                                // Añade la tabla al contenedor
                                gamesContainer.appendChild(table);
                            })
                            .catch(error => console.error('Error:', error));
                        });
                    </script>
                </div> 
            </div>
        </section>

        <section class="SearchGame">
            <h2>Unirse a Juego</h2>
            <form>
                <input type="text" id="UnirAGameId" name="gameId" placeholder="ID del Juego" required>
                <button type="submit">Buscar</button>
            </form>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.SearchGame form');
                    form.addEventListener('submit', function(event) {
                        event.preventDefault();
                        const gameId = document.getElementById('UnirAGameId').value;
                        UnirseJuego(gameId);
                    });
                });
            </script>
        </section>

        <section class="game-rules">
            <h2>Reglas del juego</h2>
            <ul>
                <li><i class="fas fa-hand-rock"></i> vs<i class="fas fa-hand-scissors"></i> = <i class="fas fa-hand-rock"></i></li>
                <li><i class="fas fa-hand-scissors"></i> vs <i class="fas fa-hand-paper"></i> = <i class="fas fa-hand-scissors"></i></li>
                <li><i class="fas fa-hand-paper"></i> vs <i class="fas fa-hand-rock"></i> = <i class="fas fa-hand-paper"></i></li>
            </ul>
        </section>

        <div class="modal " id="ModalRPS" >
            
            <div class="RockPaperScissor" id="RockPaperScissor">
                
                
                <div class="encabezado">
                    <div></div>

                    <h2>¡Piedra, Papel o Tijeras!</h2>
                    
                    <div>
                        <button class="close-button" onclick="closeRPSModal()"><i class="fas fa-times"></i></button>
                    </div>
                </div>

                <div class="GameId">
                    <input type="text" id="valorGameId" name="gameId" placeholder="ID del Juego" readonly value="TuIDdeJuego" required>
                    <button onclick="copyToClipboard(document.getElementById('valorGameId').value)">Copiar</button>
                </div>

                <section class="Partida">
                    <div class="Your">   
                        <img id="avatarRPS" >
                        <h2 id="NameRPS" ></h2>
                        <div class="jugadas" id="jugadas" >
                            <button onclick="chooseOption(document.getElementById('valorGameId').value,'R')"><i class="fas fa-hand-rock"></i></button>
                            <button onclick="chooseOption(document.getElementById('valorGameId').value,'P')"><i class="fas fa-hand-paper"></i></button>
                            <button onclick="chooseOption(document.getElementById('valorGameId').value,'S')"><i class="fas fa-hand-scissors"></i></button>
                        </div>

                    </div>
                    
                    <div>
                        <h3>vs</h3>
                    </div>
                    
                    <div class="Opponent">
                        <img id="avatarOpoente" >
                        <h2 id="NameOpoente" ></h2>
                        <p></p>
                    </div>
                </section>
                
                <section class="Resultado">
                    
                </section>

            </div>
        </div>
        <script>
            function NuevoJuego() {
                OpenRPSmodal();
                createGame();
                Charater();
            }

            function waitForOpponent(gameId) {
                const interval = setInterval(() => {
                    fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}`)
                        .then(response => response.json())
                        .then(data => {
                            // Verifica si data.players existe
                            if (data.players) {
                                // Cuenta manualmente los jugadores
                                let playerCount = 0;
                                for (let player of data.players) {
                                    playerCount++;
                                }
                                // Si hay dos jugadores, procede
                                if (playerCount === 2) {
                                    clearInterval(interval);
                                    console.log('Other player has connected');
                                    document.getElementById('jugadas').style.display = 'block';
                                    OpponentCharater(gameId);
                                }
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                }, 1000); // Adjust the interval as needed
            }

            async function UnirseJuego(gameId){
                if (await JuegoExiste(gameId)) { // Se agrega await aquí
                    OpenRPSmodal();
                    document.getElementById('valorGameId').value = gameId;
                    copyToClipboard(gameId);
                    document.getElementById('jugadas').style.display = 'block';
                    agregarJugador(gameId, localStorage.getItem('name'), localStorage.getItem('avatar'));
                    Charater();
                    OpponentCharater(gameId);
                }
            }

            function createGame(){
                fetch('https://parcial-202425-production.up.railway.app/games', {
                method: 'POST', // Método HTTP
                headers: {
                    'Content-Type': 'application/json', // Indica el tipo de contenido que se está enviando
                }
                // No se incluye body ya que no se enviarán datos
                })
                .then(response => response.json()) // Convierte la respuesta a JSON
                .then(data => {
                console.log('Success:', data); // Maneja el éxito
                document.getElementById('valorGameId').value =data.id;
                agregarJugador(data.id, localStorage.getItem('name'), localStorage.getItem('avatar'));
                copyToClipboard(data.id);
                waitForOpponent(document.getElementById('valorGameId').value);
                })
                .catch((error) => {
                console.error('Error:', error); // Maneja el error
                });
            }

            function JuegoExiste(gameId){
                return fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}`, {
                    method: 'GET', // Método HTTP
                })
                .then(response => response.json()) // Convierte la respuesta a JSON
                .then(data => {
                    if(data.error){
                        alert("El juego no existe");
                        return false;
                    } else {
                        if (data.players.length !== 1) {
                            alert("El juego ya tiene dos jugadores");
                            console.log(data);
                            return false;
                        } else {
                            return true;
                        }

                    }
                })
                .catch((error) => {
                    console.error('Error:', error); // Maneja el error
                });
            }

            function chooseOption(gameId, jugada) {
                const idplayer = localStorage.getItem('idJugador');
                fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}/players/${idplayer}/play`, {
                    method: 'PUT', // Método HTTP
                    headers: {
                        'Content-Type': 'application/json', // Indica el tipo de contenido que se está enviando
                    },
                    body: JSON.stringify({next: jugada}) // Asegúrate de que la jugada se envía en el formato correcto
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la solicitud: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    // Maneja la respuesta del servidor
                    if (data.message === "Waiting for the other player to play") {
                        console.log("Esperando por la jugada del otro jugador.");
                    } else {
                        console.log("Resultado de la partida: ", data);
                    }
                })
                .catch(error => console.error('Error:', error));
            }

            function copyToClipboard(gameId) {
                navigator.clipboard.writeText(gameId).then(() => {
                    alert("ID del juego copiado al portapapeles");
                }).catch(err => {
                    console.error("Error al copiar al portapapeles: ", err);
                    // Considera una alternativa para navegadores que no soportan esta API
                });
            }

            function OpponentCharater(gameId) {
                fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}/players`)
                    .then(response => response.json())
                    .then(data => {
                        const currentPlayerId = localStorage.getItem('idJugador');
                        const opponent = data.find(player => player.id !== currentPlayerId);
                        if (opponent) {
                            const nombre = opponent.name; 
                            const avatar = opponent.avatar; 
                            document.getElementById('NameOpoente').textContent = nombre;
                            document.getElementById('avatarOpoente').src = avatar;
                        }
                    })
                    .catch(error => console.error('Error:', error));
            }

            function Charater(){
                const nombre = localStorage.getItem('name');
                const avatar = localStorage.getItem('avatar');
                document.getElementById('NameRPS').textContent = nombre;
                document.getElementById('avatarRPS').src = avatar;
            }

            function OpenRPSmodal(){
                document.getElementById('ModalRPS').style.display = 'block';
            }

            function closeRPSModal(){
                document.getElementById('ModalRPS').style.display = 'none';
            }
            
            function chooseOption(gameId, jugada) {
                const idplayer = localStorage.getItem('idJugador');
                fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}/players/${idplayer}/play`, {
                    method: 'PUT', // Método HTTP
                    headers: {
                        'Content-Type': 'application/json', // Indica el tipo de contenido que se está enviando
                    },
                    body: JSON.stringify({next: jugada}) // Asegúrate de que la jugada se envía en el formato correcto
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Error en la solicitud: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    // Maneja la respuesta del servidor
                    if (data.message === "Waiting for the other player to play") {
                        console.log("Esperando por la jugada del otro jugador.");
                    } else {
                        console.log("Resultado de la partida: ", data);
                    }
                })
                .catch(error => console.error('Error:', error));
            }
            
            function agregarJugador(gameId, nombreJugador, avatarJugador) {
                fetch(`https://parcial-202425-production.up.railway.app/games/${gameId}/players`, {
                    method: 'POST', // Método HTTP
                    headers: {
                        'Content-Type': 'application/json', // Indica el tipo de contenido que se está enviando
                    },
                    body: JSON.stringify({
                        name: nombreJugador, // Asume que esta es la variable para el nombre del jugador
                        avatar: avatarJugador // Asume que esta es la variable para el avatar del jugador
                    }) // Convierte el objeto a una cadena JSON para enviarlo
                })
                .then(response => response.json()) // Convierte la respuesta a JSON
                .then(data => {
                    console.log('Success:', data); // Maneja el éxito
                    localStorage.setItem('idJugador', data.id);
                })
                .catch((error) => {
                    console.error('Error:', error); // Maneja el error
                });
            }



        </script>

    </main>

    <div class="salto"></div>

    <footer>
        <p>Jesus Rodolfo Gil farias &copy; 2024</p>
    </footer>
</body>
</html>