<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Avatar</title>

    <style>
                    .name-avatar {
                display: flexbox;
                background-color: #f0f0f0;
                text-align: center;
                width: 100%;
                padding: 10px;
                margin-top: 10px;
            }

                .name-avatar form {
                    display: inline;
                }



                .name-avatar .avatar {
                    display: inline-block;
                    margin: 10px 0;
                }

                    .avatar img {
                        border-radius: 50%;
                        width: 100px;
                        height: 100px;
                    }

                    .avatar button {
                        background-color: #333;
                        color: #fff;
                        font-size: 1rem;
                        padding: 5px 10px;
                        top: 50%;   
                        border: none;
                        border-radius: 5px;
                        margin: 0 10px;
                        cursor: pointer;
                    }

                    .slider {
                        display: flex;
                        overflow-x: auto;
                        scroll-snap-type: x mandatory;
                    }

                    .modal {
                        display: none; /* Oculto por defecto */
                        position: fixed; /* Flotante */
                        z-index: 1000; /* Sobre otros elementos */
                        left: 0;
                        top: 0;
                        width: 100%; /* Ancho completo */
                        height: 100%; /* Alto completo */
                        overflow: auto; /* Habilita scroll si es necesario */
                        background-color: rgba(0,0,0,0.4); /* Fondo negro semi-transparente */
                    }

                    .slider {
                        margin: 10% auto; /* 10% desde la parte superior y centrado horizontalmente */
                        padding: 20px;
                        width: 80%; /* Ancho del deslizador */
                        background: white; /* Fondo blanco para el deslizador */
                    }
    </style>

</head>
<body>


    <section class="name-avatar">

        <h2>Nombre y Avatar</h2>

        <div id="avatarModal" class="modal">
            <!-- Deslizador de Imágenes -->
            <div id="avatarSlider" class="slider"></div>
        </div>
        <script>
            function getAvatars() {
                fetch('https://parcial-202425-production.up.railway.app/games/avatars')
                .then(response => response.text()) // Obtiene la respuesta como texto
                .then(data => {
                    // Convierte la cadena a un array de JavaScript
                    const avatars = JSON.parse(data);
                    const avatarList = document.getElementById('lista-avatares');
                    // Itera sobre el array
                    avatars.forEach(avatar => {
                        const img = document.createElement('img');
                        img.src = avatar; // Establece el src de la imagen al valor del avatar
                        img.width = 100; // Establece el ancho de la imagen a 100 píxeles
                        img.height = 100; // Establece el alto de la imagen a 100 píxeles
                        img.classList.add('slide'); // Añade una clase para estilizar cada imagen si es necesario
                        
                        // Extrae el nombre del avatar de la URL
                        const avatarName = avatar.split('=').pop();
                        img.setAttribute('name', avatarName); // Añade un atributo name a la imagen con el nombre extraído
                        
                        img.addEventListener('click', () => {
                            // Establece el valor del campo de entrada de nombre al nombre del avatar
                            document.getElementById('name').value = avatarName;
                            document.getElementById('avatarSelect').src = avatar; // Establece la imagen seleccionada como avatar
                            hideModal(); // Oculta el modal
                        });

                        // Añade el elemento de imagen al contenedor del deslizador
                        document.getElementById('avatarSlider').appendChild(img);
                    });
                })
                .catch(error => console.error('Error al cargar los avatares:', error));
            }

            document.addEventListener('DOMContentLoaded', getAvatars);

            function showModal() {
                document.getElementById('avatarModal').style.display = 'block';
            }

            function hideModal() {
                    document.getElementById('avatarModal').style.display = 'none';
            }
        </script>

        <form>
            <div class="avatar" role="button" id="avatar-boton" onclick="showModal()">
                <button type="button"><i class="fas fa-chevron-left"></i></button>
                <img src="https://api.dicebear.com/9.x/bottts-neutral/svg?seed=Bella" alt="Avatar image" id="avatarSelect" >
                <button type="button"><i class="fas fa-chevron-right"></i></button>
            </div>
            <script>

            </script>


            
            <div class="name">
                <input type="text" id="name"  name="name" required>
            </div>
            <button type="submit">Guardar</button>
        </form>
    </section>
</body>
</html>